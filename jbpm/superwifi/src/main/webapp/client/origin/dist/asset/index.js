//From origin\asset\index.js
define("index",["avalon","util","common","originmoduleuserwidgetuserwidgetjs","ready!"],function(e,t,n){function a(e,t){var n,i="";return t=t||0,t++,_.each(e,function(e){var n,r=e.navTitle||e.title,o="",s="",l="",c="",d=e.phref?"phref="+e.phref:"",u=!!e.forceRefresh;n=e.path?e.path:e.route?"#"+e.route:"javascript:;",1===t?(r='<i class="icon-toggle iconfont" data-state="hidden">&#xe600;</i>&nbsp;&nbsp;'+r,l='ms-click="mainNavToggle"'):c="ms-hover=state-hover",e.isHidden&&(o="fn-hide"),u&&(s+="force-refresh-link"),i+='<li class="page-nav-item '+o+'"><div class="nav-title"><a '+c+' href="'+n+'" '+l+" "+d+' class="'+s+'">'+r+"</a></div>",i+=e.children&&e.children.length>0?a(e.children,t)+"</li>":"</li>"}),n=1===t?"main-page-nav-list":"sub-page-nav-list fn-hide",'<ul class="'+n+" page-nav-list page-nav-"+t+'">'+i+"</ul>"}var i=this,r=i.erp,o=r.page,s=o.pageEvent,l={};return _.extend(l,{$init:function(){n.setup(function(){var n=$(".app-bd"),l=$(".app-hd"),c=e.define("app",function(e){e.appBdMinHeight=0,e.pageTitle="",e.blankImgSrc=r.ASSET_PATH+"image/s.gif",e.adjustBdMinHeight=function(){var t=$(".app-inner-l",n).height(),a=l.outerHeight(),r=$(i).height();r-a>t&&(t=r-a),e.appBdMinHeight=t},e.mainNavToggle=function(){var t=$(this).closest(".page-nav-item"),n=$(".icon-toggle",this),a=t.children(".page-nav-list"),i=n.data("state");i&&"shown"!=i?(a.stop(!0,!0).slideDown("fast",function(){e.adjustBdMinHeight()}),n.html("&#xe601;"),n.data("state","shown")):(a.stop(!0,!0).slideUp("fast",function(){e.adjustBdMinHeight()}),n.html("&#xe600;"),n.data("state","hidden"))},e.clickNavVisibleHandler=function(){var e=$(this),t=$(".app-inner-l",n),a=$(".app-inner-l-inner",n),r=$(".app-inner-r",n);e.hasClass("state-shown")?(a.hide(),t.css("overflow","hidden").stop(!0,!0).animate({width:0},"fast",function(){r.css("margin-left",0),e.css("left",0),e.addClass("state-hidden").removeClass("state-shown").text("显示")})):(a.show(),t.css("overflow","visible").stop(!0,!0).animate({width:"230px"},"fast",function(){r.css("margin-left","231px"),e.css("left",230-$(i).scrollLeft()+"px"),e.addClass("state-shown").removeClass("state-hidden").text("隐藏")}))}}),d=$(".page-nav-wrapper");d.html(a(o.routes)),setTimeout(function(){c.adjustBdMinHeight()},300),t.regPageNav($("a",d));var u;$(i).scroll(function(){var e=$(".page-nav-visible-h",n);clearTimeout(u),u=setTimeout(function(){e.hasClass("state-shown")&&e.css({left:230-$(this).scrollLeft()+"px"})},30)}),s.on("inited switched",function(e,t,n){c.adjustBdMinHeight(),c.pageTitle=n.title}),e.scan(),o.lastPagePath||t.jumpPage("#/welcome");var p,f,m;if(o.lastPagePath){for(p=$('[href="#'+o.lastRoute+'"]',d),f=p.closest(".page-nav-list"),m=f.prev(".nav-title");m.length;)p=$("a",m),f=p.closest(".page-nav-list"),m=f.prev(".nav-title");$(".icon-toggle",p).click()}})},$remove:function(){}}),l});